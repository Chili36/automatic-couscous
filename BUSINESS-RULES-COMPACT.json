{
  "ruleSeverities": {
    "ERROR": {
      "validationImpact": "Blocking – validation fails.",
      "rules": ["BR29", "BR30", "BR31"]
    },
    "HIGH": {
      "validationImpact": "Hard warning – treated as critical.",
      "rules": ["BR01", "BR03", "BR04", "BR05", "BR06", "BR07", "BR08", "BR13", "BR14", "BR16", "BR17", "BR19", "BR20", "BR21", "BR24", "BR25", "BR26", "BR27", "BR28"]
    },
    "LOW": {
      "validationImpact": "Soft warning – advisory only.",
      "rules": ["BR10", "BR11", "BR12", "BR15", "BR23"]
    },
    "NONE": {
      "validationImpact": "Informational message.",
      "rules": ["BR22"]
    },
    "UNSPECIFIED": {
      "validationImpact": "Not currently implemented.",
      "rules": ["BR02", "BR09", "BR18"]
    }
  },
  "termTypeRules": {
    "r": {
      "name": "Raw Commodity",
      "allowedFacets": ["F27", "F28"],
      "forbiddenFacets": ["F01", "F03", "F04"],
      "warnings": {
        "F03": "Would create derivative (BR13)",
        "F04": "Ingredient facets not for raw commodities (BR12)"
      },
      "specialRules": [
        "F27 must be child of base term (BR01)",
        "Some processes forbidden for specific raw terms (BR19)"
      ]
    },
    "d": {
      "name": "Derivative",
      "allowedFacets": ["F01", "F27", "F28", "F03"],
      "conditionalFacets": {
        "F01": "Only if single F27 present (BR06/BR07)",
        "F27": "Must be more specific than implicit (BR05)"
      },
      "warnings": {
        "F04": "Ingredient facets cause warning (BR12)"
      }
    },
    "c": {
      "name": "Composite",
      "allowedFacets": ["F04", "F28"],
      "forbiddenFacets": ["F01", "F27"],
      "errors": {
        "F01": "Source facets forbidden on composites (BR03)",
        "F27": "Source commodities forbidden on composites (BR04)"
      }
    },
    "s": {
      "name": "Simple Composite",
      "allowedFacets": ["F04", "F28"],
      "forbiddenFacets": ["F01", "F27"],
      "errors": {
        "F01": "Source facets forbidden on composites (BR03)",
        "F27": "Source commodities forbidden on composites (BR04)"
      }
    },
    "h": {
      "name": "Hierarchy",
      "warning": "Should not be used as base term (BR23/BR24)"
    },
    "g": {
      "name": "Group",
      "warning": "Should not be used as base term (BR23/BR24)"
    },
    "f": {
      "name": "Facet",
      "error": "Cannot be used as base term (BR17)"
    }
  },
  "singleCardinalityFacets": [
    "F01", "F02", "F03", "F07", "F11", "F22", "F24", "F26", "F30", "F32", "F34"
  ],
  "processOrdinalGroups": {
    "1": {
      "name": "Heating methods",
      "mutuallyExclusive": true,
      "examples": ["1.1 Baking", "1.2 Boiling", "1.3 Frying"]
    },
    "2": {
      "name": "Preservation",
      "mutuallyExclusive": true,
      "examples": ["2.1 Canning", "2.2 Freezing"]
    },
    "3": {
      "name": "Physical treatments",
      "mutuallyExclusive": true,
      "examples": ["3.1 Cutting", "3.2 Grinding"]
    },
    "0": {
      "name": "Non-exclusive",
      "mutuallyExclusive": false
    }
  },
  "facetCategories": {
    "F01": {
      "name": "Source",
      "description": "Animal source for derivatives",
      "restriction": "Only on derivatives with single F27"
    },
    "F03": {
      "name": "Physical state",
      "description": "Liquid, solid, etc.",
      "restriction": "Single cardinality, creates derivatives from raw"
    },
    "F04": {
      "name": "Characterizing ingredient",
      "description": "Minor ingredients in composites",
      "restriction": "Primarily for composites, warning on raw/derivatives"
    },
    "F27": {
      "name": "Source commodities",
      "description": "Plant/animal source materials",
      "restriction": "Must follow hierarchy rules, forbidden on composites"
    },
    "F28": {
      "name": "Process",
      "description": "Processing methods applied",
      "restriction": "Check ordinal codes for mutual exclusivity"
    }
  },
  "domainSpecificRules": {
    "VMPR": {
      "name": "Veterinary Medicine Products Residues",
      "rules": {
        "STANDARD": {
          "condition": "animal_products",
          "mandatory": ["F01", "F02"],
          "description": "Source and Part-nature required for animal tissue, milk, eggs, honey"
        },
        "RPC_PROCESSED": {
          "condition": "rpc_derivative_or_processed",
          "mandatory": ["F01"],
          "explicit": true,
          "description": "Explicit F01 Source required for processed products"
        },
        "NONFOOD": {
          "condition": "base_term_A0C60",
          "mandatory": ["F01", "F02"],
          "description": "Animal species and sample type for non-food matrices"
        },
        "PLAN3": {
          "condition": "processed_imports_plan3",
          "mandatory": ["F33"],
          "cardinality": 1,
          "description": "Single F33 Legislative class for import control"
        }
      }
    },
    "FOOD_ADDITIVES": {
      "name": "Food Additives Monitoring",
      "rules": {
        "STANDARD": {
          "mandatory": ["F33"],
          "recommended": ["F03"],
          "description": "Legislative category per EC 1333/2008, physical state recommended"
        }
      }
    },
    "CONTAMINANTS": {
      "name": "Chemical Contaminants",
      "rules": {
        "ACRYLAMIDE": {
          "condition": "acrylamide_analysis",
          "mandatory": ["F33"],
          "description": "Legislative class for acrylamide monitoring programs"
        }
      }
    }
  },
  "contextSpecificRules": {
    "F33_ACRYLAMIDE": {
      "facet": "F33",
      "context": "acrylamide_analysis",
      "severity": "ERROR",
      "requirement": "MANDATORY",
      "description": "Legislative class required for acrylamide samples"
    },
    "F33_ADDITIVES": {
      "facet": "F33",
      "context": "food_additives",
      "severity": "ERROR",
      "requirement": "MANDATORY",
      "description": "Legislative category per Regulation (EC) 1333/2008"
    },
    "F33_VMPR": {
      "facet": "F33",
      "context": "vmpr_processed_plan3",
      "severity": "ERROR",
      "requirement": "REQUIRED",
      "description": "Legislative class for third-country import control plan",
      "note": "Only one F33 code for mixed samples"
    },
    "F33_FLAVOURINGS": {
      "facet": "F33",
      "context": "flavourings",
      "severity": "LOW",
      "requirement": "RECOMMENDED",
      "description": "Legislative class for flavourings"
    },
    "F23_INFANTS": {
      "facet": "F23",
      "context": "infant_products",
      "severity": "LOW",
      "requirement": "RECOMMENDED",
      "description": "Target consumer for infant formulas (under 12 months)"
    },
    "F01_NONFOOD": {
      "facet": "F01",
      "context": "base_term_A0C60",
      "severity": "ERROR",
      "requirement": "MANDATORY",
      "description": "Source animal species for non-food animal matrices"
    },
    "F02_NONFOOD": {
      "facet": "F02",
      "context": "base_term_A0C60",
      "severity": "ERROR",
      "requirement": "MANDATORY",
      "description": "Part nature for non-food animal matrices"
    },
    "F17_COOKING": {
      "facet": "F17",
      "context": "furans_acrylamide_analysis",
      "severity": "MEDIUM",
      "requirement": "REQUIRED",
      "description": "Extent of cooking for heat treatment reporting"
    },
    "F19_PACKAGING": {
      "facet": "F19",
      "context": "contaminants_bisphenol_phthalates",
      "severity": "MEDIUM",
      "requirement": "CRUCIAL",
      "description": "Packaging material for contaminant analysis"
    },
    "F07_FAT": {
      "facet": "F07",
      "context": "fat_weight_expression",
      "severity": "LOW",
      "requirement": "REQUIRED",
      "description": "Fat content when results expressed as fat weight"
    }
  },
  "validationExamples": {
    "valid": [
      {
        "code": "A000V#F28.A07KQ",
        "description": "Raw corn + Freezing",
        "reason": "F28 allowed on raw commodities"
      },
      {
        "code": "A002C#F01.A0F6E$F27.A000V",
        "description": "Cereal bran from cow, from corn",
        "reason": "Derivative with single F27 can have F01"
      },
      {
        "code": "A00BZ#F04.A01DJ",
        "description": "Fruit pie with apples",
        "reason": "F04 appropriate for composites"
      }
    ],
    "invalid": [
      {
        "code": "A000V#F03.A0F6F",
        "description": "Raw corn + liquid state",
        "error": "BR13: F03 would create derivative"
      },
      {
        "code": "A00BZ#F27.A000V",
        "description": "Fruit pie + source commodity",
        "error": "BR04: F27 forbidden on composites"
      },
      {
        "code": "A002C#F28.A07JN$F28.A07JP",
        "description": "Derivative + two heating methods",
        "error": "BR26: Mutually exclusive processes"
      }
    ]
  }
}
